<launch>

<include file="$(find local_planning)/launch/camera_driver.launch"/>

<group ns="pico">
	<node name="filter_point_node" pkg="local_planning" type="filter_point_node" output="screen" clear_params="true">
	
		<remap from="filter_point_node/pt_cloud_in" to="/royale_camera_driver/point_cloud"/>
		<remap from="filter_point_node/cam_info_in" to="/royale_camera_driver/camera_info"/>
		<remap from="filter_point_node/pt_cloud_viz" to="filter_point_node/pt_cloud_viz"/>
		<remap from="filter_point_node/pt_out" to="filter_point_node/pt_out"/>
		
		<param name="distance_interval" type="double" value="0.05"/>
		<param name="pixel_interval" type="int" value="20"/>
		<param name="min_distance" type="double" value="0.15"/>
		<param name="max_distance" type="double" value="1.2"/>
		<param name="n_particles_vox" type="int" value="50000"/>
		<param name="outliers_per_voxel" type="int" value="20"/>
		
		<rosparam param="trans_noise_sdev"> [3, 0.3] </rosparam> <!-- voxels, distance -->
		<rosparam param="obsv_noise_sdev"> [100, 10] </rosparam> <!-- confidence points, nOutliers -->
		
		<rosparam param="max_action_values"> [0.4, 0.2, 6.28] </rosparam>
		<rosparam param="min_action_values"> [0, -0.2, -6.28] </rosparam>
		<rosparam param="action_intervals"> [0.1, 0.1, 6.28] </rosparam>
		
		<rosparam param="reward_Q"> [0.001, 0.001, 0.001] </rosparam>
		<param name="repulsive_potential_max_distance" type="double" value="1.2"/>
		<param name="repulsive_potential_gain" type="double" value="10"/>
		
		<param name="alpha_vector_iterations" type="int" value="10"/>
		
		<param name="lookahead_time" type="double" value="1"/>
		<param name="sampling_time" type="double" value="0.05"/>
		<param name="base_frame_id" type="string" value="base_link"/>
		
	</node>
	<node name="noise_cloud_node" pkg="local_planning" type="noise_cloud_node" output="screen">
	
	<remap from="noise_cloud_node/pt_cloud_in" to="/royale_camera_driver/point_cloud"/>
		
	</node>
</group>

<node pkg="tf" type="static_transform_publisher" name="cam2base" args="0 0 0 -1.57 0 -1.57 base_link royale_camera_optical_frame 100" />
	
</launch>
